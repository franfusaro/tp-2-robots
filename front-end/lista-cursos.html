<!DOCTYPE html>

<html lang="en">
<head>
    <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <title>Trabajo Practico robots</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script language="javascript" type="text/javascript" src="../abi/AlumnosCursadas_abi.js"></script>
    <script src="helper.js" type="text/javascript"></script>
</head>
<body>
<h1>Listado de cursos</h1>
<div id="cursos">

</div>
<br/>
<div id="txStatus"></div>

<script>
    var cursosFactory;
    var userAccount;

    function loadCursos() {
        helper.getCursos(displayCursos);
    }

    function displayCursos(ids) {
        alert(JSON.stringify(ids));
        $("#cursos").empty();
        for (let id of ids) {
            helper.getCursoDetails(id, appendCurso);
        }
    }

    function appendCurso(curso) {
        // Using ES6's "template literals" to inject variables into the HTML.
        // Append each one to our #zombies div
        $("#cursos").append(`<div class="curso">
      <ul>
        <li>Id: ${curso.id}</li>
        <li>Nombre: ${curso.nombre}</li>
      </ul>
    </div>`);
    }

    window.addEventListener('load',
        async function() {
            await helper.startApp(window.ethereum);
            loadCursos();
        }
    );

</script>

</body>
</html>
