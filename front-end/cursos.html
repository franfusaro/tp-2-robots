<!DOCTYPE html>

<html lang="en">
    <head>
        <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <meta charset="UTF-8">
        <title>Trabajo Practico robots</title>
        <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
        <script language="javascript" type="text/javascript" src="../abi/AlumnosCursadas_abi.js"></script>
        <script src="helper.js" type="text/javascript"></script>
    </head>
    <body>
    <div id="cursos"></div>

    <form name="formularioContacto" method="get" action="accion1.html">
        <h2>Formulario de creacion de curso</h2>
        <div style="margin: 10px;">
            <label>Identificador:  <input id="idCurso" type="text" name="nombre" /></label>
        </div>
        <div style="margin: 10px;">
            <label>Nombre:  <input id="nombreCurso" type="text" name="nombre" /></label>
        </div>
        <div style="margin: 10px;">
            <label>Créditos:  <input id="creditosCurso" type="text" name="creditos" /></label>
        </div>
        <div style="margin: 10px;">
            <label>Profesor (address):  <input id="addrProfesor" type="text" name="creditos" /></label>
        </div>
        <div style="margin: 10px;">
            <label>Correlativas TODO:  <input id="correlativasCurso" type="text" name="corrlativas" /></label>
        </div>
        <button type="button" onclick="crearCurso()">Crear curso</button>
    </form>

    <br><br>
    <div id="txStatus"></div>
        <script>
            function crearCurso() {
                var userAddr = helper.userAccount;
                $("#txStatus").text("Creando curso... Por favor espere...");
                var idCurso = document.getElementById('idCurso').value;
                var nombre = document.getElementById('nombreCurso').value;
                var creditos = document.getElementById('creditosCurso').value;
                //var correlativas = document.getElementById('correlativasCurso').value;
                var correlativas = [];
                return helper.createCurso(idCurso,
                    nombre,
                    userAddr,
                    creditos,
                    correlativas,
                    function(receipt) {
                        $("#txStatus").text("El curso: " + nombre + " ha sido creado satisfactiamente!");
                    },
                    function(error) {
                        $("#txStatus").text(JSON.stringify(error));
                    });

            }

            window.addEventListener('load',
                async function() {
                    await helper.startApp(window.ethereum);
                });

        </script>

    </body>
</html>
